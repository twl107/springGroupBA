<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>문항 관리</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/admin.css}">
</head>
<body>

<div th:replace="~{admin/adminLeft :: sidebar}"></div>

<main class="admin-content">

  <button class="btn btn-outline-secondary d-lg-none mb-3" onclick="toggleSidebar()">☰ 메뉴</button>

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h3 class="fw-bold">문항 관리</h3>
      <small class="text-secondary">해당 설문의 문항들을 관리합니다.</small>
    </div>

    <a th:href="@{'/admin/survey/' + ${surveyId} + '/question/new'}"
       class="btn btn-success">
      + 새 문항 추가
    </a>

  </div>

  <div class="card shadow-sm p-3">

    <table class="table table-hover align-middle">
      <thead class="table-light">
      <tr>
        <th>#</th>
        <th>질문 내용</th>
        <th>유형</th>
        <th style="width:180px;">관리</th>
      </tr>
      </thead>

      <tbody>
      <tr th:each="q, idx : ${list}">
        <td th:text="${idx.index + 1}"></td>
        <td th:text="${q.questionText}"></td>
        <td th:text="${q.questionType}"></td>

        <td>
          <div class="d-flex gap-1">
            <a th:href="@{'/admin/survey/' + ${surveyId} + '/question/edit/' + ${q.id}}"
               class="btn btn-outline-primary btn-sm">수정</a>

            <form th:action="@{'/admin/survey/' + ${surveyId} + '/question/delete/' + ${q.id}}"
                  method="post"
                  onsubmit="return confirm('삭제하시겠습니까?');">
              <button type="submit" class="btn btn-outline-danger btn-sm">삭제</button>
            </form>
          </div>
        </td>

      </tr>
      </tbody>
    </table>

  </div>
  <br><hr>

  <a th:href="@{/admin/survey}" class="btn btn-outline-dark">
    리스트로 돌아가기
  </a>

</main>

<script>
  function toggleSidebar() {
    document.querySelector('.admin-sidebar').classList.toggle('active');
  }
</script>

</body>
</html>
