<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ê·¸ë¦°ì†Œí”„íŠ¸ - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
  <link rel="stylesheet" th:href="@{/css/admin.css}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: transform 0.2s;
    }

    .stat-card:hover {
        transform: translateY(-5px);
    }

    .stat-info h3 {
        margin: 0 0 10px 0;
        font-size: 0.95rem;
        color: #888;
        font-weight: 500;
    }

    .stat-info p {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 700;
        color: #333;
    }

    .stat-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }

    .blue-theme { color: #007bff; background: #e7f1ff; }
    .green-theme { color: #28a745; background: #e8f5e9; }
    .red-theme { color: #dc3545; background: #fce8e6; }
    .orange-theme { color: #fd7e14; background: #fff3e0; }

    .section-container {
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        margin-bottom: 20px;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #f1f1f1;
    }

    .section-title { font-size: 1.1rem; font-weight: bold; color: #333; }

    .simple-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
    .simple-table th { text-align: left; padding: 12px; background: #f8f9fa; color: #666; font-weight: 600; }
    .simple-table td { padding: 12px; border-bottom: 1px solid #eee; color: #444; }
    .status-badge { padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; background: #eee; color: #555; }

    @media (max-width: 1200px) {
        .dashboard-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 768px) {
        .dashboard-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<div th:replace="~{admin/adminLeft :: sidebar}"></div>

<main class="admin-content">
  <button class="mobile-menu-btn" onclick="toggleSidebar()">â˜° ë©”ë‰´</button>
  <div style="margin-bottom: 30px;">
    <h2 style="font-size: 1.8rem; font-weight: bold; margin-bottom: 5px;">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>
    <p style="color: #666; font-size: 0.95rem;">
      ì˜¤ëŠ˜ ë‚ ì§œ: <span th:text="${#temporals.format(#temporals.createNow(), 'yyyyë…„ MMì›” ddì¼')}">2024-01-01</span>
    </p>
  </div>

  <div class="dashboard-grid">
    <div class="stat-card">
      <div class="stat-info">
        <h3>ì‹ ê·œ ì£¼ë¬¸ (ê²°ì œì™„ë£Œ)</h3>
        <p>
          <span th:text="${newOrders != null ? newOrders : 0}">0</span>ê±´
        </p>
      </div>
      <div class="stat-icon blue-theme">
        <i class="fas fa-shopping-cart"></i>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-info">
        <h3>ì˜¤ëŠ˜ ë§¤ì¶œì•¡</h3>
        <p>
          <span th:text="${#numbers.formatInteger(todaySales != null ? todaySales : 0, 0, 'COMMA')}">0</span>ì›
        </p>
      </div>
      <div class="stat-icon green-theme">
        <i class="fas fa-won-sign"></i>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-info">
        <h3>ì´ë²ˆ ë‹¬ ë§¤ì¶œì•¡</h3>
        <p>
          <span th:text="${#numbers.formatInteger(monthSales != null ? monthSales : 0, 0, 'COMMA')}">0</span>ì›
        </p>
      </div>
      <div class="stat-icon orange-theme">
        <i class="fas fa-chart-line"></i>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-info">
        <h3>ì·¨ì†Œ/ë°˜í’ˆ ìš”ì²­</h3>
        <p style="color: #dc3545;">
          <span th:text="${claims != null ? claims : 0}">0</span>ê±´
        </p>
      </div>
      <div class="stat-icon red-theme">
        <i class="fas fa-exclamation-circle"></i>
      </div>
    </div>
  </div>

  <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
    <div class="section-container">
      <div class="section-header">
        <span class="section-title">ìµœê·¼ ì‹ ê·œ ì£¼ë¬¸</span>
        <a th:href="@{/admin/dbShop/adminOrderList}"
           style="font-size: 0.85rem; color: #007bff; text-decoration: none;">
          ì „ì²´ë³´ê¸° >
        </a>
      </div>
      <table class="simple-table">
        <thead>
        <tr>
          <th>ì£¼ë¬¸ë²ˆí˜¸</th>
          <th>ì£¼ë¬¸ì</th>
          <th>ìƒí’ˆëª…</th>
          <th>ê²°ì œê¸ˆì•¡</th>
          <th>ìƒíƒœ</th>
          <th>ì‹œê°„</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${recentOrders == null or recentOrders.isEmpty()}">
          <td colspan="6" style="text-align: center; padding: 30px;">ìµœê·¼ ì£¼ë¬¸ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
        <tr th:each="order : ${recentOrders}">
          <td th:text="${order.id}">1001</td>
          <td th:text="${order.member.name}">í™ê¸¸ë™</td>
          <td th:text="${order.orderItems[0].product.name + (order.orderItems.size() > 1 ? ' ì™¸ ' + (order.orderItems.size() - 1) + 'ê±´' : '')}">ìƒí’ˆëª…</td>
          <td th:text="${#numbers.formatInteger(order.totalPrice, 0, 'COMMA') + 'ì›'}">50,000ì›</td>
          <td>
                            <span class="status-badge"
                                  th:style="${order.status.name() == 'PAYMENT_COMPLETED' ? 'background:#e3f2fd; color:#0d47a1;' : ''}"
                                  th:text="${order.status.description}">ê²°ì œì™„ë£Œ</span>
          </td>
          <td th:text="${#temporals.format(order.orderDate, 'MM-dd HH:mm')}">12-10 14:30</td>
        </tr>
        </tbody>
      </table>
    </div>

    <div class="section-container">
      <div class="section-header">
        <span class="section-title">ê´€ë¦¬ í•„ìš” í˜„í™©</span>
      </div>
      <ul style="list-style: none; padding: 0; margin: 0;">
        <li style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee;">
          <span>ğŸ“¦ ë°°ì†¡ ì¤€ë¹„ í•„ìš”</span>
          <a th:href="@{/admin/dbShop/adminOrderList(status='PREPARING')}" style="font-weight: bold; color: #333; text-decoration: none;">
            <span th:text="${preparingCount != null ? preparingCount : 0}">0</span>ê±´
          </a>
        </li>

        <li style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee;">
          <span>ğŸ’¬ ì‹ ê·œ ë¬¸ì˜</span>
          <a th:href="@{/inquiry/adminList}" style="font-weight: bold; color: #dc3545; text-decoration: none;">
            <span th:text="${unansweredQna != null ? unansweredQna : 0}">0</span>ê±´
          </a>
        </li>

        <li style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee;">
          <span>ğŸš¨ ì‹ ê³  ì ‘ìˆ˜(ê²Œì‹œê¸€/ëŒ“ê¸€)</span>
          <a th:href="@{/admin/report/list}" style="font-weight: bold; color: #dc3545; text-decoration: none;">
            <span th:text="${communityBlindCount != null ? communityBlindCount : 0}">0</span>ê±´
          </a>
        </li>

        <li style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee;">
          <span>ğŸ‘¤ ì‹ ê·œ ê°€ì… íšŒì›</span>
          <a th:href="@{/admin/members/list}" style="font-weight: bold; color: #007bff; text-decoration: none;">
            <span th:text="${newMembers != null ? newMembers : 0}">0</span>ëª…
          </a>
        </li>
      </ul>
    </div>
  </div>

</main>

<script>
  function toggleSidebar() {
      const sidebar = document.querySelector('.admin-sidebar');
      sidebar.classList.toggle('active');
  }
</script>

</body>
</html>