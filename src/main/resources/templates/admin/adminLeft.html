<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script th:inline="javascript">
    const ctx = /*[[@{/}]]*/ "/";
  </script>
</head>
<body>
<nav class="admin-sidebar" th:fragment="sidebar">
  <div class="sidebar-header">
    <a th:href="@{/admin/adminMain}" class="sidebar-title">
      ê·¸ë¦°ì†Œí”„íŠ¸ Admin
    </a>
    <button class="close-sidebar-btn" onclick="toggleSidebar()">âœ•</button>
  </div>

  <div class="sidebar-home">
    <a th:href="@{/}" class="home-btn">
      ğŸ  ì‚¬ì´íŠ¸ í™ˆìœ¼ë¡œ
    </a>
  </div>

  <ul class="menu-group">
    <li class="menu-item">
      <button class="menu-btn" onclick="toggleMenu(this)">
        <span>ğŸ‘¤ íšŒì› ê´€ë¦¬</span>
        <span>â–¼</span>
      </button>
      <div class="submenu">
        <a th:href="@{/admin/members/list}">íšŒì› ëª©ë¡</a>
        <a th:href="@{/admin/members/grade}">ë“±ê¸‰ ê´€ë¦¬</a>
        <a th:href="@{/admin/members/memberDel}">íƒˆí‡´ íšŒì›</a>
        <a th:href="@{/admin/members/mail}">ë©”ì¼/SMS ë°œì†¡</a>
      </div>
    </li>

    <li class="menu-item">
      <button class="menu-btn" onclick="toggleMenu(this)">
        <span>ğŸ›ï¸ ì‡¼í•‘ëª° ê´€ë¦¬</span>
        <span>â–¼</span>
      </button>
      <div class="submenu">
        <a th:href="@{/admin/dbShop/dbProductInput}">ìƒí’ˆ ë“±ë¡/ê´€ë¦¬</a>
        <a th:href="@{/admin/dbShop/dbProductList}">ìƒí’ˆ ë¦¬ìŠ¤íŠ¸</a>
        <a th:href="@{/admin/dbShop/adminOrderList}">ì£¼ë¬¸/ë°°ì†¡ ê´€ë¦¬</a>
      </div>
    </li>

    <li class="menu-item">
      <button class="menu-btn" onclick="toggleMenu(this)">
        <span>ğŸ“ ê²Œì‹œíŒ ê´€ë¦¬</span>
        <span>â–¼</span>
      </button>
      <div class="submenu">
        <a th:href="@{/admin/report/list}">ì‹ ê³ ë¦¬ìŠ¤íŠ¸</a>
        <a th:href="@{/inquiry/adminList}">QnAë¦¬ìŠ¤íŠ¸</a>
        <a th:href="@{/admin/review/list}">ê³ ê°í›„ê¸° ê´€ë¦¬</a>
      </div>
    </li>

    <li class="menu-item">
      <button class="menu-btn" onclick="toggleMenu(this)">
        <span>ğŸ’¼ ì±„ìš© ê´€ë¦¬</span>
        <span>â–¼</span>
      </button>
      <div class="submenu">
        <a th:href="@{/admin/recruit/manage}">ì±„ìš© í˜ì´ì§€ ê´€ë¦¬</a>
        <a th:href="@{/admin/recruit/applicants}">ì§€ì›ì ê´€ë¦¬</a>
      </div>
    </li>

    <li class="menu-item">
      <button class="menu-btn" onclick="toggleMenu(this)">
        <span>ğŸ“‹ ì„¤ë¬¸ì¡°ì‚¬ ê´€ë¦¬</span>
        <span>â–¼</span>
      </button>
      <div class="submenu">
        <a th:href="@{/admin/survey}">ì„¤ë¬¸ ë©”íƒ€ ëª©ë¡</a>
      </div>
    </li>

    <li class="menu-item">
      <button class="menu-btn" onclick="toggleMenu(this)">
        <span>ğŸ“Š í†µê³„/ë¡œê·¸</span>
        <span>â–¼</span>
      </button>
      <div class="submenu">
        <a th:href="@{/admin/stats/visit}">ë°©ë¬¸ì í†µê³„</a>
        <a th:href="@{/admin/stats/join}">ê°€ì… í†µê³„</a>
        <a th:href="@{/admin/log/access}">ì ‘ì† ë¡œê·¸</a>
      </div>
    </li>

    <li class="menu-item">
      <button class="menu-btn" onclick="toggleMenu(this)">
        <span>âš™ï¸ ì‹œìŠ¤í…œ ì„¤ì •</span>
        <span>â–¼</span>
      </button>
      <div class="submenu">
        <a th:href="@{/admin/settings/basic}">ì‚¬ì´íŠ¸ ê¸°ë³¸ ì„¤ì •</a>
        <a th:href="@{/admin/settings/terms}">ì•½ê´€ ë° ì •ì±…</a>
        <a th:href="@{/admin/settings/code}">ê³µí†µ ì½”ë“œ ê´€ë¦¬</a>
        <a th:href="@{/admin/settings/ip}">ì ‘ì† IP ì°¨ë‹¨</a>
        <a th:href="@{/admin/settings/admin-account}">ê´€ë¦¬ì ê³„ì • ê´€ë¦¬</a>
      </div>
    </li>

  </ul>

  <div style="margin-top: auto; padding: 20px;">
    <form th:action="@{/logout}" method="post">
      <button type="submit"
              style="width: 100%; padding: 10px; background: #dc3545; color: white; border: none; cursor: pointer; border-radius: 4px;">
        ë¡œê·¸ì•„ì›ƒ
      </button>
    </form>
  </div>

  <script>
    function toggleMenu(button) {
        const submenu = button.nextElementSibling;
        submenu.classList.toggle('open');
        button.classList.toggle('active');
    }

    document.addEventListener("DOMContentLoaded", function() {
      const currentPath = window.location.pathname.replace(ctx, "/");
      const menuLinks = document.querySelectorAll('.submenu a');

      menuLinks.forEach(link => {
          const linkPath = link.getAttribute('href');

          if (currentPath.startsWith(linkPath)) {
              link.classList.add('active-link');
              const parentSubmenu = link.closest('.submenu');

              if (parentSubmenu) {
                  parentSubmenu.classList.add('open');

                  const toggleBtn = parentSubmenu.previousElementSibling;
                  if (toggleBtn && toggleBtn.classList.contains('menu-btn')) {
                      toggleBtn.classList.add('active');
                  }
              }
          }
      });
  });
  </script>
</nav>

</body>
</html>