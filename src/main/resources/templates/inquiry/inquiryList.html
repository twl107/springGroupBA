<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>그린소프트 - 1:1 문의</title>
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/inquiry.css}">
</head>
<body>

<div th:replace="~{include/header :: header}"></div>
<main class="main-content">
    <section class="sub-visual" th:style="'background-image: url(' + @{/images/content/img_visual01.jpg} + ');'">
        <div class="sub-visual-content">
            <h2>1:1 문의</h2>
            <p>궁금한 점이 있으시면 언제든지 문의해주세요.</p>
        </div>
    </section>
    <div class="sub-content-container">

        <div class="pds-search-container">
            <form th:action="@{/inquiry/inquiryList}" method="get" class="pds-search-form">
                <select name="status" class="form-select" style="width: 130px;">
                    <option value="">전체 상태</option>
                    <option value="WAITING" th:selected="${status != null and status.name() == 'WAITING'}">답변 대기</option>
                    <option value="COMPLETE" th:selected="${status != null and status.name() == 'COMPLETE'}">답변 완료</option>
                </select>
                <select name="type" class="form-select">
                    <option value="t" th:selected="${pageRequestDTO.type == 't'}">제목</option>
                    <option value="c" th:selected="${pageRequestDTO.type == 'c'}">내용</option>
                    <option value="tc" th:selected="${pageRequestDTO.type == 'tc'}">제목 + 내용</option>
                </select>
                <input type="text" name="keyword" th:value="${pageRequestDTO.keyword}" placeholder="검색어를 입력하세요">
                <button type="submit" class="btn-search" style="padding: 10px 20px; background: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer;">검색</button>
            </form>
            <a th:href="@{/inquiry/inquiryInput}" class="btn-write">문의하기</a>
        </div>
        <div class="pds-table-wrap">
            <table class="pds-table">
                <thead>
                <tr>
                    <th class="th-num">번호</th>
                    <th class="th-status">상태</th>
                    <th class="th-title">제목</th>
                    <th class="th-writer">작성자</th>
                    <th class="th-date">작성일</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${result.dtoList == null || result.dtoList.isEmpty()}">
                    <td colspan="5" class="no-data">등록된 문의가 없습니다.</td>
                </tr>
                <tr th:each="dto : ${result.dtoList}">
                    <td th:text="${dto.id}"></td>
                    <td>
                        <span class="badge"
                              th:classappend="${dto.status.name() == 'COMPLETE'} ? 'bg-success' : 'bg-secondary'"
                              th:text="${dto.status.description}"></span>
                    </td>
                    <td class="td-title">
                        <a th:href="@{/inquiry/inquiryContent(id=${dto.id}, page=${result.page}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword}, status=${status})}"
                           th:text="${dto.title}"></a>
                    </td>
                    <td th:text="${dto.writerName}"></td>
                    <td th:text="${#temporals.format(dto.regDate, 'yyyy-MM-dd')}"></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="pds-pagination" th:if="${result.totalPage > 0}">
            <ul>
                <li th:if="${result.prev}">
                    <a th:href="@{/inquiry/inquiryList(page=${result.start - 1}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword}, status=${status})}">
                        &lt;
                    </a>
                </li>
                <li th:each="pageNum : ${result.pageList}" th:classappend="${result.page == pageNum} ? 'active'">
                    <a th:href="@{/inquiry/inquiryList(page=${pageNum}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword}, status=${status})}"
                       th:text="${pageNum}"></a>
                </li>
                <li th:if="${result.next}">
                    <a th:href="@{/inquiry/inquiryList(page=${result.end + 1}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword}, status=${status})}">
                        &gt;
                    </a>
                </li>
            </ul>
        </div>
    </div>
</main>
<div th:replace="~{include/footer :: footer}"></div>
<th:block th:replace="~{include/messageScript :: alertFragment}"></th:block>

</body>
</html>